# I. Khám phá phương pháp phân tích đếm giá trị (value counts)
## 1. Phương pháp phân tích đếm giá trị là gì?
Phương pháp đếm giá trị (value counts) là phương pháp siêu hiệu quả trong phân tích dữ liệu. Dùng để trả lời cho câu hỏi: " Có bao nhiêu lần mỗi giá trị xuất hiện trong cột này? "
Ví dụ: Bạn muốn đếm xem trong một lớp có bao nhiêu bạn tên "An", "Bình", "Long"....

## 2. Dùng value counts với mục đích gì?
## Dùng để làm gì?

| Mục đích              | Ý nghĩa                                                                 |
|-----------------------|------------------------------------------------------------------------|
| Xem phân bố dữ liệu   | Ví dụ: Giới tính: Nam/Nữ bao nhiêu phần trăm                           |
| Phát hiện bất thường  | Phát hiện giá trị hiếm xuất hiện 1 lần có thể là lỗi nhập liệu          |
| Hỗ trợ trực quan hóa  | Tạo biểu đồ cột (bar chart) hoặc biểu đồ tròn (pie chart)               |
| Tiền xử lý dữ liệu    | Biết cột nào nên mã hóa (encode) hoặc loại bỏ (drop) dữ liệu không cần thiết |

##  3. Trả lời câu hỏi
Dưới đây là một vài câu hỏi mẫu dùng phương pháp phân tích đếm giá trị.
- 👉 Quốc gia cư trú chính của phần lớn khách hàng là gì ?
- 👉 Danh mục sản phẩm nào có tần suất bán hàng cao nhất ?
- 👉 Xác định 5 khách hàng hàng đầu có số lần mua lại nhiều nhất ?
- 👉 Quản lý bán hàng nào có số lượng đơn bán được nhiều nhất ?
- 👉 Ai là 5 nhân viên bán hàng có số lượng đơn bán nhiều nhất ?
- 👉 Thiết bị nào được sử dụng chủ yếu để thực hiện việc mua hàng ?
- 👉 Tìm các thống kê mô tả của giá trị đơn hàng, chi phí và hoàn tiền ?

Trước khi trả lời bất kỳ câu hỏi nào trong phân tích dữ liệu khám phá, bạn cần hiểu rõ loại phân tích nào cần thực hiện để đưa ra câu trả lời chính xác nhất. Để làm được điều nầy, bận cần phân tích kỹ câu hỏi của mình, xác định những phương pháp phân tích phù hợp và loại bỏ những phường pháp không phù hợp. Qua đó, bạn sẽ lựa chọn được những phương pháp phân tích hiệu quả nhất, giúp tìm ra câu hỏi đúng và có cái nhìn sâu sắc về vấn đề. 
Hãy cùng tôi phân tích câu hỏi: " Quốc gia cư trú chính của phần lớn khách hàng là gì?
=> Dựa trên câu hỏi, nếu thực hiện phân tích tần số, ta sẽ nhận được tần suất xuất hiện của các quốc gia đó trong bộ đữ liệu. Từ đó, chúng ta có thể xác định được quốc gia xuất hiện nhiều nhất và phổ biến trong dữ liệu. 

- **Câu hỏi 1: Quốc gia cư trú chính của phần lớn khách hàng là gì ?**

**Bước 1**: Phân tích tần số các giá trị trong cột "country"
```
frequency_counts = final_df['country'].value_counts()
```
Sau đó nhập ``` frequency_counts ``` để kiểm tra kết quả trả về.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/e369e0d4-7956-4262-b796-d3dfaa1b3d3f" />

Kết quả cho thấy "Portugal" là nước có lượng khách nhiều nhất.

**Bước 2**: Trực quan hóa kết quả trên biểu đồ cột.

```
import matplotlib.pyplot as plt

# Vẽ biểu đồ cột cho tần số
plt.figure(figsize=(8, 5))
frequency_counts.plot(kind='bar', color='skyblue', edgecolor='black')
plt.title('Quốc gia cư trú chính của phần lớn khách hàng')
plt.xlabel('Country')
plt.ylabel('Frequency')
plt.xticks(rotation=90)  # Xoay nhãn trục x nếu cần
plt.show()
```
Kết quả trả về theo dạng biểu đồ cột như sau.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/c08c99df-2c40-47a0-b6a9-dd19443884db" />

- **Câu hỏi 2: Danh mục sản phẩm nào có tần suất bán hàng cao nhất ?**

Dựa trên câu hỏi, nếu thực hiện phân tích tần số, ta sẽ nhận được tần suất xuất hiện của các danh mục sản phẩm trong bộ dữ liệu. Từ đó, chúng ta có thể xác định được *danh mục sản phẩm* bán hàng nhiều nhất hoặc phổ biến nhất trong dữ liệu.

**Bước 1**: Phân tích tần số các giá trị trong cột "category"
```
category_counts = final_df['category'].value_counts()
```
Sau đó nhập ``` category_counts ``` để kiểm tra kết quả trả về.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/137773ec-a2de-44c3-8a4e-6621d7b6313f" />

Kết quả cho thấy "Book, Appliances, Games, Clothing" là những danh mục sản phẩm có tần suất bán hàng cao nhất.

**Bước 2**: Trực quan hóa kết quả trên biểu đồ cột.

```
import matplotlib.pyplot as plt

# Vẽ biểu đồ cột cho tần số
plt.figure(figsize=(8, 5))
category_counts.plot(kind='bar', color='yellow', edgecolor='orange')
plt.title('Danh mục sản phẩm có tần suất bán hàng cao nhất')
plt.xlabel('Category')
plt.ylabel('Frequency')
plt.xticks(rotation=90)  # Xoay nhãn trục x nếu cần
plt.show()
```
Kết quả trả về theo dạng biểu đồ cột như sau.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/b910eae2-d3b9-4706-a002-bb0867a1c3b4" />

- **Câu hỏi 3: Xác định 5 khách hàng đầu có số lần mua lại nhiều nhất**

Dựa trên câu hỏi, nếu thực hiện phân tích tần số, ta sẽ nhận được tần suất xuất hiện của các danh mục sản phẩm trong bộ dữ liệu. Từ đó, chúng ta có thể xác định được *danh mục sản phẩm* bán hàng nhiều nhất hoặc phổ biến nhất trong dữ liệu.

**Bước 1**: Phân tích tần số các giá trị trong cột "customer_name"
```
customer_counts = final_df['customer_name'].value_counts()
```
Sau đó nhập ``` customer_counts ``` để kiểm tra kết quả trả về.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/7fa2347a-b6c4-48d3-a047-c28deeea8098" />

Kết quả cho thấy "Hessel-Stiedemann, Goldner-Dibbert, Gislason-Stanton, Schoen-Keeling, Farrell, Swaniawski and Crist" là những danh mục sản phẩm có tần suất bán hàng cao nhất.

**Bước 2**: Trực quan hóa kết quả trên biểu đồ cột.

```
import matplotlib.pyplot as plt

# Vẽ biểu đồ cột cho tần số
plt.figure(figsize=(8, 5))
customer_counts.plot(kind='bar', color='green', edgecolor='black')
plt.title('Danh mục 5 khách hàng đầu có số lần mua lại nhiều nhất')
plt.xlabel('Category')
plt.ylabel('Frequency')
plt.xticks(rotation=90)  # Xoay nhãn trục x nếu cần
plt.show()
```
Kết quả trả về theo dạng biểu đồ cột như sau.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/5be5bc10-3461-4798-825d-63358b5af132" />

- **Câu hỏi 4: Thiết bị nào được sử dụng chủ yếu để thực hiện việc mua hàng?**

Dựa trên câu hỏi, nếu thực hiện phân tích tần số, ta xác định được *thiết bị* được sử dụng chủ yếu để mua hàng là thiết bị gì?
**Bước 1**: Phân tích tần số các giá trị trong cột "device_type"
```
device_type_counts = final_df['device_type'].value_counts()
```
Sau đó nhập ``` device_type_counts ``` để kiểm tra kết quả trả về.

<img width="347" alt="image" src="https://github.com/user-attachments/assets/cda772a8-19dd-49d8-8507-c42587983d51" />

Kết quả cho thấy "PC, mobile, tablet" là những danh mục sản phẩm có tần suất bán hàng cao nhất.

**Bước 2**: Trực quan hóa kết quả trên biểu đồ cột.

```
# Tính tỷ lệ phần trăm
devtype_percentages = (device_type_counts / device_type_counts.sum()) * 100

# Vẽ biểu đồ tròn cho tỷ lệ phần trăm
plt.figure(figsize=(6, 6))
plt.pie(devtype_percentages, labels=devtype_percentages.index, autopct='%1.1f%%', startangle=140)
plt.title('Category Percentages')
plt.axis('equal')  # Đảm bảo biểu đồ tròn hiển thị đúng tỷ lệ
plt.show()
```
Kết quả trả về theo dạng biểu đồ cột như sau.
<img width="347" alt="image" src="https://github.com/user-attachments/assets/005336b0-449f-42d3-9420-9a5f44eef2c4" />

---
# II. Khám phá phương pháp phân tích thống kê mô tả (Descriptive statistics)
## 1. Phân tích thống kê mô tả là gì?
- Phương pháp phân tích thống kê mô tả (descriptive statistics) là kiểu phân tích dùng để tóm tắt, mô tả và trình bày dữ liệu một cách ngắn gọn, dễ hiểu. Nó giúp bạn hiểu rõ đặc điểm chính của dữ liệu như trung bình, độ lệch chuẩn, giá trị lớn nhất, nhỏ nhất, phân bố dữ liệu, v.v.
- Nói đơn giản, thống kê mô tả là cách bạn đếm, tính toán và mô tả dữ liệu để nhìn thấy "bức tranh tổng thể" của dữ liệu đó trước khi đi sâu phân tích phức tạp hơn.

## 2. Mục tiêu của thống kê mô tả
- Tóm tắt dữ liệu: Biết được dữ liệu có bao nhiêu mẫu (số lượng dòng), trung bình bao nhiêu, giá trị thấp nhất và cao nhất là gì....
- Hiểu được phân bố: xem dữ liệu tập trung ở đâu? có bị lệch về một phía nào không?
- Phát hiện ngoại lệ (Outliers): có giá trị nào bất thường hay cực đoan nào không?
- Giúp chọn được phương pháp phân tích phù hợp: Nếu dữ liệu có nhiều outliers thì có thê phải xử lý trước khi phân tích. 

## 3. Các chỉ số quan trọng trong thống kê mô tả

| Chỉ số                     | Ý nghĩa                                                         |
|----------------------------|-----------------------------------------------------------------|
| **Số lượng mẫu (Count)**    | Tổng số điểm dữ liệu có trong cột                                |
| **Trung bình (Mean)**        | Giá trị trung bình của toàn bộ dữ liệu                           |
| **Trung vị (Median)**        | Giá trị chính giữa khi dữ liệu được sắp xếp                     |
| **Mốt (Mode)**              | Giá trị xuất hiện nhiều nhất trong dữ liệu                       |
| **Độ lệch chuẩn (Std Dev)**  | Đo lường mức độ phân tán của dữ liệu quanh trung bình            |
| **Giá trị nhỏ nhất (Min)**   | Giá trị thấp nhất trong dữ liệu                                  |
| **Giá trị lớn nhất (Max)**   | Giá trị cao nhất trong dữ liệu                                   |
| **Phân vị (Percentiles)**    | Các điểm cắt dữ liệu thành các phần, ví dụ 25%, 50% (median), 75%|

## 4. Ví dụ minh họa về ý nghĩa

Giả sử bạn có điểm số của 100 học sinh:  
- **Mean = 70**: Trung bình lớp là 70 điểm  
- **Median = 75**: Một nửa lớp đạt trên 75 điểm  
- **Std Dev = 10**: Điểm số dao động khá lớn, phần lớn học sinh nằm trong khoảng 60-80 điểm (70 ± 10)  
- **Min = 40, Max = 95**: Có bạn thấp nhất 40 điểm, bạn cao nhất 95 điểm  

Nhờ đó bạn hiểu ngay được mức độ phân bố điểm và biết lớp học có đồng đều hay không.

## 5. Ứng dụng thực tế trong phân tích dữ liệu

1. **Khám phá dữ liệu (Exploratory Data Analysis - EDA):** Thống kê mô tả là bước đầu tiên trong EDA, giúp bạn nắm rõ tình trạng dữ liệu.  
2. **Phát hiện dữ liệu lỗi hoặc thiếu:** Nếu thấy Min hoặc Max quá lệch hoặc Count thấp hơn kỳ vọng, bạn biết phải kiểm tra lại.  
3. **Chuẩn bị dữ liệu:** Từ thống kê mô tả bạn sẽ quyết định có cần xử lý dữ liệu như loại bỏ ngoại lệ, chuẩn hóa hay không.  
4. **Báo cáo nhanh**: Giúp các bên liên quan nắm được thông tin cơ bản của dữ liệu trước khi đi sâu.

 ## 6. Trả lời các câu hỏi
 - **Câu hỏi 1: Tìm các mô tả về giá trị đơn hàng, chi phí và hoàn trả ?**

**Bước 1**: Thực hiện chạy đoạn code sau:
 ```
        # Các cột số cần phân tích thống kê mô tả
        numeric_columns = ['order_value_EUR', 'refund', 'cost']
        
        # Thực hiện phân tích thống kê mô tả cho các biến số cụ thể
        numeric_summary = final_df[numeric_columns].describe()
        numeric_summary
 ```
Ta được kết quả trả về như sau:

![image](https://github.com/user-attachments/assets/bfe676f5-9b16-4996-b195-3fbdf34bb87d)

**Giải thích**: Dưới đây là phần phân tích kết quả cụ thể
| Tên chỉ số | Ý nghĩa & Giải thích cụ thể                                                                                                                                                                          |
| ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **count**  | Số lượng bản ghi có dữ liệu ở cột đó. Ví dụ: `order_value_EUR` có 20 giá trị, `refund` chỉ có 10 giá trị (có thể do thiếu dữ liệu).                                                                  |
| **mean**   | Trung bình cộng của các giá trị trong cột. VD: Giá trị trung bình đơn hàng là \~114,046 EUR.                                                                                                         |
| **std**    | Độ lệch chuẩn, đo độ phân tán dữ liệu so với trung bình. Giá trị lớn nghĩa là dữ liệu phân bố rộng, không tập trung. VD: Đơn hàng có độ lệch chuẩn \~77,172 EUR, tức giá trị đơn hàng rất biến động. |
| **min**    | Giá trị nhỏ nhất trong cột. VD: Đơn hàng nhỏ nhất có giá \~17,524 EUR.                                                                                                                               |
| **25%**    | Giá trị phân vị 25%, tức 25% dữ liệu nhỏ hơn hoặc bằng giá trị này. VD: 25% đơn hàng ≤ 71,620 EUR.                                                                                                   |
| **50%**    | Giá trị phân vị 50% hay còn gọi là trung vị (median), điểm chính giữa dữ liệu khi sắp xếp. VD: Nửa đơn hàng có giá trị ≤ 81,680 EUR.                                                                 |
| **75%**    | Giá trị phân vị 75%, 75% dữ liệu nhỏ hơn hoặc bằng giá trị này. VD: 75% đơn hàng ≤ 156,585 EUR.                                                                                                      |
| **max**    | Giá trị lớn nhất trong cột. VD: Đơn hàng lớn nhất lên đến \~296,686 EUR.                                                                                                                             |

**Bước 2**: Vẽ biểu đồ phân phối(histogram) và đường mật độ(KDE), với đoạn code mẫu dưới đây
 ```
# vẽ biểu đồ phân phối (histogram) và đường mật độ(KDE)
import seaborn as sns
# Tạo một hình với 3 biểu đồ con (subplots) theo hàng dọc, mỗi hàng một cột, tổng cộng 3 biểu đồ
plt.figure(figsize=(12,4))

# Vẽ biểu đồ phân phối cho 'order_value_EUR'
plt.subplot(1, 3, 1) # 1 hàng, 3 cột, biểu đồ thứ 1
sns.histplot(final_df['order_value_EUR'], kde=True, color='blue', bins=30)  # kde=True để vẽ đường mật độ ước lượng xác suất (Kernel density estimate)
plt.title('Order Value Distribution')

# Vẽ biểu đồ phân phối cho 'refund'
plt.subplot(1, 3, 2) # 1 hàng, 3 cột, biểu đồ thứ 2
sns.histplot(final_df['refund'], kde=True, color='orange', bins=30)
plt.title('Refund Distribution')

#vẽ biểu đồ phân phối cho 'cost'
plt.subplot(1, 3, 3) # 1 hàng, 3 cột, biểu đồ thứ 3
sns.histplot(final_df['cost'], kde=True, color='green', bins=30)
plt.title('Cost Distribution')

# Chỉnh để loyout không bị chồng chéo lên nhau
plt.tight_layout()
# Hiển thị biểu đồ
plt.show()
```
Kết quả của biểu đồ như sau:

![image](https://github.com/user-attachments/assets/bd416a8d-675a-4bb7-9ad0-7611c84a0e3b)

**Bước 3**: Vẽ biểu đồ hộp (boxplot). 
Đây là biểu đồ để trực quan hóa sự phân phối dữ liệu và phát hiện giá trị outlier, với đoạn code dưới đây: 
```
import seaborn as sns
import matplotlib.pyplot as plt

# Tạo một hình với ba biểu đồ con (subplots) nằm trên cùng một hàng, tổng cộng 3 biểu đồ
plt.figure(figsize=(12, 4))

# Vẽ biểu đồ hộp cho biến 'order_value_EUR' trong subplot đầu tiên
plt.subplot(131)  # 1 hàng, 3 cột, biểu đồ thứ 1
sns.boxplot(data=final_df['order_value_EUR'])
plt.title('Order value Boxplot')

# Vẽ biểu đồ hộp cho biến 'cost' trong subplot thứ hai
plt.subplot(132)  # 1 hàng, 3 cột, biểu đồ thứ 2
sns.boxplot(data=final_df['cost'])
plt.title('Cost Boxplot')

# Vẽ biểu đồ hộp cho biến 'refund' trong subplot thứ ba
plt.subplot(133)  # 1 hàng, 3 cột, biểu đồ thứ 3
sns.boxplot(data=final_df['refund'])
plt.title('Refund Boxplot')

# Căn chỉnh layout để các biểu đồ không bị chồng chéo, lệch nhau
plt.tight_layout()

# Hiển thị toàn bộ biểu đồ
plt.show()
```
Kết quả của biểu đồ boxplot như sau:

![image](https://github.com/user-attachments/assets/74d851ab-f137-42fb-ae69-a5983dd1827b)

- Giá trị trung vị (median) - đường nằm giữa hộp
- Phân vị 25% và 75% (Q1 và Q3) - rìa hộp
- Khoảng cách giữa Q1 và Q3 (IQR) - độ rộng hộp
- Các giá trị ngoại lai (outliers) - điểm rời rạc nằm ngoài râu (whiskers)

# III. Khám phá phương pháp phân tích theo nhóm
## 1. Phương pháp phân tích theo nhóm là gì? 
- Phương pháp phân tích theo nhóm là cách phân tích dữ liệu mà bạn chia dữ liệu thành các nhóm dựa trên cột hoặc nhiều biến phân loại (category variables) hoặc các điều kiện nhất định, so sánh các nhóm đó với nhau.
- Mục đích là để hiểu sự khác biệt, xu hướng hoặc mối liên hệ giữa các nhóm dữ liệu khác nhau thay vì phân tích toàn bộ dữ liệu chung chung

## 2. Tại sao dùng phân tích theo nhóm?
- Giúp phát hiện các mẫu, đặc điểm riêng biệt của từng nhóm
- Phân tích chi tiết hơn, không làm mất thông tin do dữ liệu toonge hợp chung
- Hỗ trợ ra quyết định chính xác, tập trung vào nhóm đối tượng cụ thể

## 3. Trả lời câu hỏi 
- **Câu hỏi 1: Xác định 3 danh mục sản phẩm hàng đầu dựa trên cả giá trị đơn hàng và chi phí ?**
Mục đích của câu hỏi này muốn bạn tìm ra những nhóm sản phẩm mà khách hàng chi nhiều nhất(giá trị đơn hàng cao) và chi phí cho những nhóm này cũng lớn, tức là vừa sinh ra doanh thu cao vừa có chi phí đáng kể.
**Bước 1**: Cần phải xác định danh mục sản phẩm hàng đầu dựa trên giá trị đơn hàng.
```
## Xác định danh mục sản phẩm hàng đầu dựa trên giá trị đơn hàng
median_order_value = final_df.groupby('category')['order_value_EUR'].median().sort_values(ascending=False) # xếp theo giá trị giảm dần
top_3_order_value = median_order_value
print("Top 3 categories based on median order value:")
print(top_3_order_value)
```
![image](https://github.com/user-attachments/assets/56adc239-a99f-4428-b9b0-73434dead723)

=> Top 3 nhóm sản phẩm theo giá trị đơn hàng lớn nhất là: Clothing, Accessories, Games
**Giải thích**:
a) ```groupby('category')```:
Chia dữ liệu thành từng nhóm theo danh mục sản phẩm.
Vì câu hỏi yêu cầu phân tích dựa trên từng nhóm danh mục, nên phải tách theo nhóm.
b)```.median()``` thay vì ```.mean()```:
- Median (trung vị) là chỉ số đại diện tốt hơn trong trường hợp có dữ liệu lệch hoặc có các giá trị ngoại lai (outliers).
- Ví dụ: Một số đơn hàng cực lớn có thể làm tăng giá trị trung bình (mean) không phản ánh đúng xu hướng chung của khách hàng.
- Median giúp phản ánh chính xác giá trị trung tâm, tránh bị lệch bởi các đơn hàng đặc biệt.

**Bước 2**: Xác định danh mục sản phẩm hàng đầu dựa trên chi phí.
```
median_cost = final_df.groupby('category')['cost'].median()
median_cost.sort_values(ascending = False)
```
![image](https://github.com/user-attachments/assets/f33a41d4-5f77-42f5-b1ab-00ca0e6275f6)

=> Top 3 nhóm sản phẩm thep chi phí là: Clothing, Assessories, Games

- **Câu hỏi 2: Xác định 3 khách hàng đầu đóng góp nhiều nhất cho lợi nhuận và có số mũ cao nhất?**
**Bước 1**: Xác định các khách hàng đầu dựa trên chi phí.
```
median_customer = final_df.groupby('customer_name')['cost'].median()
median_customer.sort_values(ascending = False)
```
Kết quả trả về như sau:
![image](https://github.com/user-attachments/assets/461639df-9933-465e-9dfd-9e91f6acb117)

=> 3 khách hàng đã đóng góp nhiều nhất là: Larkin-Collier, Johns and Sons , Hermiston, Simonis and Wisoky

- **Câu hỏi 3: Các đại diện bán hàng nào có giao dịch hoàn tiền cao nhất cho khách hàng?**
**Bước 1**" Xác định các đại diện nhãn hàng nào có giao dịch hoàn tiền cao nhẩt.
```
median_sales_rep = final_df.groupby('sales_rep')['refund'].median()
median_sales_rep.sort_values(ascending=False)
```
![image](https://github.com/user-attachments/assets/09c64239-6f36-4b97-abb3-7b3fa71be423)
=> Kết qua: những đại diện bán hàng có giao dịch hoàn tiền cao nhất


